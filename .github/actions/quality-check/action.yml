# ============================================================================
# ‚úÖ COMPOSITE ACTION REUTILIZ√ÅVEL: Quality Check (Prettier + ESLint)
# ============================================================================
# 
# PROP√ìSITO:
#   Action gen√©rica para valida√ß√£o de qualidade de c√≥digo:
#   - Prettier: Verifica formata√ß√£o
#   - ESLint: Valida linting com --max-warnings 0
#   100% reutiliz√°vel por qualquer projeto Node.js.
#
# COMO USAR:
#   steps:
#     - uses: actions/checkout@v4
#     - uses: videoconverterpro/pipeline-template/.github/actions/setup-node-pnpm@main
#     - uses: videoconverterpro/pipeline-template/.github/actions/quality-check@main
#       with:
#         format-script: 'format:check'
#         lint-script: 'lint:check'
#
# PR√â-REQUISITOS:
#   - node_modules instalado (usar setup-node-pnpm antes)
#   - Scripts no package.json
#
# PROPRIEDADE:
#   Bruno Roberto Morillo - CPF: 460.876.598-11
#   ¬© 2025 VideoConverterPro - Todos os direitos reservados
#
# ============================================================================

name: "‚úÖ Quality Check"
description: "Valida√ß√£o de qualidade: Prettier + ESLint strict"

inputs:
  format-script:
    description: "Nome do script de format check no package.json"
    required: false
    default: "format:check"
  
  lint-script:
    description: "Nome do script de lint check no package.json"
    required: false
    default: "lint:check"

runs:
  using: "composite"
  steps:
    # ========================================================================
    # STEP 1: Prettier - Validar formata√ß√£o
    # ========================================================================
    - name: "üíÖ [ACTION] Prettier - Validar formata√ß√£o"
      shell: bash
      run: |
        echo "üîç Verificando formata√ß√£o com Prettier..."
        pnpm run ${{ inputs.format-script }}
        echo "‚úÖ Formata√ß√£o OK!"
    
    # ========================================================================
    # STEP 2: ESLint - Validar linting
    # ========================================================================
    - name: "üîç [ACTION] ESLint - Validar linting"
      shell: bash
      run: |
        echo "üîç Verificando linting com ESLint..."
        pnpm run ${{ inputs.lint-script }}
        echo "‚úÖ Linting OK!"
